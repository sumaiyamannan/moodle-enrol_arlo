define(["core/webapi","core/modal_factory","core/modal_events"],function(a,b,c){var d={approveContent:"totara_reportedcontent_approve_review",removeContent:"totara_reportedcontent_remove_review"},e=function(a,b){document.querySelector("#reportedcontent-actions-"+a+" .actions").style.display="none",document.querySelector("#reportedcontent-actions-"+a+" .loading").style.display="none",document.querySelector("#reportedcontent-actions-"+a+" .status-"+b).style.display="block"},f=function(a){document.querySelector("#reportedcontent-actions-"+a+" .loading").style.display="block",document.querySelector("#reportedcontent-actions-"+a+" .actions").style.display="none"},g=function(){var g=document.querySelector('table[data-source="rb_source_reportedcontent"]');if(g&&null!==g){var h=function(b,c){M.util.js_pending(b),f(c),a.call({operationName:b,variables:{review_id:c}}).then(function(a){e(c,a.review.status),M.util.js_complete(b)})},i=function(a){var e=a.target||void 0;if(e&&"BUTTON"===e.tagName){var f=e.getAttribute("data-report")||null,g=e.getAttribute("data-action")||null;f&&g&&("approve"===g?h(d.approveContent,f):"remove"===g&&b.create({type:b.types.CONFIRM,title:e.getAttribute("data-modal-title"),body:e.getAttribute("data-modal-content")},void 0,{yesstr:e.getAttribute("data-yes"),nostr:e.getAttribute("data-no")}).done(function(a){a.getRoot().on(c.yes,function(){h(d.removeContent,f)}),a.show()}))}};g.addEventListener("click",i)}};return{init:g}});